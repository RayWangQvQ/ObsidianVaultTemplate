---
doc_type: weread-highlights-reviews
bookId: "26943492"
reviewCount: 2
noteCount: 17
author: CloudMan
cover: https://cdn.weread.qq.com/weread/cover/41/YueWen_26943492/t7_YueWen_26943492.jpg
readingStatus: 读完
progress: 99%
totalReadDay: 3
readingTime: 2小时56分钟
readingDate: 2023-05-17
finishedDate: 2023-05-23
isbn: 9787302479703
lastReadDate: 2023-05-23
tags:
  - read

---
# 元数据
> [!abstract] 每天5分钟玩转Docker容器技术
> - ![ 每天5分钟玩转Docker容器技术|200](https://cdn.weread.qq.com/weread/cover/41/YueWen_26943492/t7_YueWen_26943492.jpg)
> - 书名： 每天5分钟玩转Docker容器技术
> - 作者： CloudMan
> - 简介： Docker和容器技术是当下最火的IT技术，无论是互联网还是传统企业都在研究和实践如何用容器构建自己的 IT 基础设施。学习本书能够让读者少走弯路，系统地学习、掌握和实践 Docker 和容器技术。 本书共分为三部分。第一部分介绍容器技术生态环境。第二部分是容器核心知识，包括架构、镜像、容器、网络和存储。第三部分是容器进阶知识，包括多主机管理、跨主机网络方案、监控、日志管理和数据管理。读者在学习的过程中，可以跟着教程进行操作，在实践中掌握 Docker 容器技术的核心技能。在之后的工作中，可以将本教程作为参考书，按需查找相关知识点。 本书主要面向微服务软件开发人员，以及 IT 实施和运维工程师等相关人员，也适合高等院校和培训学校相关专业的师生教学参考。
> - 出版时间： 2017-09-01 00:00:00
> - ISBN： 9787302479703
> - 分类： 计算机-计算机综合
> - 出版社： 清华大学出版社
> - PC地址：https://weread.qq.com/web/reader/93d325a0719b200493d5ba9

# 高亮划线

### 第1章 鸟瞰容器生态系统

> 📌 所谓编排（orchestration），通常包括容器管理、调度、集群定义和服务发现等。通过容器编排引擎，容器被有机地组合成微服务应用，实现业务需求。 
> ⏱ 2023-05-21 10:46:40 ^26943492-5-6093-6167

#### 3.1 镜像的内部结构

> 📌 hello-world是Docker官方提供的一个镜像，通常用来验证Docker是否安装成功。 
> ⏱ 2023-05-21 20:13:03 ^26943492-17-785-832

> 📌 对于base镜像来说，底层直接用Host的kernel，自己只需要提供rootfs就行了。 
> ⏱ 2023-05-22 00:25:21 ^26943492-17-4181-4226

#### 3.2 构建镜像

> 📌 不要将多余文件放到build context，特别不要把 /、/usr作为build context，否则构建过程会相当缓慢甚至失败。 
> ⏱ 2023-05-22 00:35:06 ^26943492-18-5917-5984

> 📌 Docker会在启动的临时容器中执行操作，并通过commit保存为新的镜像。 
> ⏱ 2023-05-22 00:36:41 ^26943492-18-6857-6895

> 📌 ● COPY将文件从build context复制到镜像。 
> ⏱ 2023-05-22 00:58:58 ^26943492-18-13397-13455

> 📌 ● ADD与COPY类似，从build context复制文件到镜像。不同的是，如果src是归档文件（tar、zip、tgz、xz等），文件会被自动解压到dest。 
> ⏱ 2023-05-22 00:59:28 ^26943492-18-13625-13736

#### 3.3 RUN vs CMD vs ENTRYPOINT

> 📌 CMD和ENTRYPOINT推荐使用Exec格式，因为指令可读性更强，更容易理解。RUN则两种格式都可以。 
> ⏱ 2023-05-22 01:06:23 ^26943492-19-2807-2860

> 📌 ENTRYPOINT看上去与CMD很像，它们都可以指定要执行的命令及其参数。不同的地方在于ENTRYPOINT不会被忽略，一定会被执行，即使运行docker run时指定了其他命令。 
> ⏱ 2023-05-22 01:10:32 ^26943492-19-5015-5106

#### 3.4 分发镜像

> 📌 只有Docker Hub上的镜像可以省略registry-host:[port] 
> ⏱ 2023-05-22 01:19:09 ^26943492-20-9442-9482

#### 5.2 host网络

> 📌 直接使用Docker host的网络最大的好处就是性能，如果容器对网络传输效率有较高要求，则可以选择host网络。 ^26943492-33-898-955
- 💭 host性能原来是优于bridge的，那看来跑v2ray这类代理应用，还是用host比较好，之前一直都是喜欢用bridge的。 - ⏱ 2023-05-22 09:30:53 

#### 5.3 bridge网络

> 📌 当前容器网络拓扑结构如图5-9所示。 
> ⏱ 2023-05-22 09:44:31 ^26943492-34-2243-2261

#### 5.4 user-defined网络

> 📌 [插图]
   
   图5-17
   
   好了，我们来看看当前docker host的网络拓扑结构，如图5-18所示。
   
   [插图] 
> ⏱ 2023-05-22 10:29:45 ^26943492-35-3337

#### 5.5 容器间通信

> 📌 使用docker DNS有个限制：只能在user-defined网络中使用。也就是说，默认的bridge网络是无法使用DNS的。 
> ⏱ 2023-05-23 08:26:49 ^26943492-36-1648-1712

#### 6.2 Data Volume

> 📌 docker提供了两种类型的volume:bind mount和docker managed volume。 
> ⏱ 2023-05-23 09:11:31 ^26943492-41-1406-1460

> 📌 使用单一文件有一点要注意：host中的源文件必须要存在，不然会当作一个新目录bind mount给容器。 
> ⏱ 2023-05-23 09:12:56 ^26943492-41-4315-4367

> 📌 docker managed volume与bind mount在使用上的最大区别是不需要指定mount源，指明mount point就行了 
> ⏱ 2023-05-23 09:14:37 ^26943492-41-4838-4908

> 📌 表6-1 bind mount和docker managed volume的不同点[插图] 
> ⏱ 2023-05-23 09:17:02 ^26943492-41-8015-8062

# 读书笔记

## 5.2 host网络

### 划线评论
> 📌 直接使用Docker host的网络最大的好处就是性能，如果容器对网络传输效率有较高要求，则可以选择host网络。  ^21860447-7IoqpbIsV
    - 💭 host性能原来是优于bridge的，那看来跑v2ray这类代理应用，还是用host比较好，之前一直都是喜欢用bridge的。
    - ⏱ 2023-05-22 09:32:59
   
# 本书评论

## 书评 No.1 
很棒，适合docker入门到进阶。 共三个篇章，第一篇章是背景知识介绍，第二篇章是docker核心技术，第三篇章讲基于docker的多主机（包括监控和日志）。 干货和精华集中在第二篇章，对镜像、容器、网络和存储的讲解，深入浅出，图文并茂，原理和实操都有照顾到，尤其是原理，讲的很棒了。 第三篇章其实作用就不太大了，因为集群目前看，是k8s的世界了，基于原生docker来直接搭建的场景并不太多。 ^21860447-7IqFm2gKC
⏱ 2023-05-23 20:54:35

